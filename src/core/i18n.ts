type Locale = "en" | "ko" | "ja" | "zh" | "es" | "fr" | "de" | "it";

const SUPPORTED: Locale[] = ["en", "ko", "ja", "zh", "es", "fr", "de", "it"];

let current: Locale = "en";

export function detectLocale(): Locale {
  const raw =
    process.env.LANG ||
    process.env.LC_ALL ||
    process.env.LC_MESSAGES ||
    process.env.LANGUAGE ||
    "";
  const code = raw.split(".")[0].split("_")[0].toLowerCase();
  if (SUPPORTED.includes(code as Locale)) return code as Locale;
  return "en";
}

export function getLocale(): Locale {
  return current;
}

export function initLocale(): void {
  current = detectLocale();
}

// ── translations ─────────────────────────────────────────

const messages: Record<string, Record<Locale, string>> = {
  // ── setup wizard ───────────────────────────────────────
  "setup.title": {
    en: "Giver Initial Setup",
    ko: "Giver 초기 설정",
    ja: "Giver 初期設定",
    zh: "Giver 初始设置",
    es: "Configuracion inicial de Giver",
    fr: "Configuration initiale de Giver",
    de: "Giver Ersteinrichtung",
    it: "Configurazione iniziale di Giver",
  },
  "setup.detecting": {
    en: "Checking available AI providers...",
    ko: "사용 가능한 AI를 확인하고 있습니다...",
    ja: "利用可能なAIを確認しています...",
    zh: "正在检查可用的AI...",
    es: "Comprobando proveedores de IA disponibles...",
    fr: "Verification des fournisseurs IA disponibles...",
    de: "Verfuegbare KI-Anbieter werden geprueft...",
    it: "Verifica dei provider AI disponibili...",
  },
  "setup.selectAi": {
    en: "Select an AI to use:",
    ko: "사용할 AI를 선택하세요:",
    ja: "使用するAIを選択してください:",
    zh: "请选择要使用的AI:",
    es: "Seleccione un IA:",
    fr: "Selectionnez une IA:",
    de: "Waehlen Sie eine KI:",
    it: "Seleziona un'IA:",
  },
  "setup.choose": {
    en: "Choose",
    ko: "선택",
    ja: "選択",
    zh: "选择",
    es: "Elegir",
    fr: "Choisir",
    de: "Auswahl",
    it: "Scegli",
  },
  "setup.invalidChoice": {
    en: "Invalid choice.",
    ko: "잘못된 선택입니다.",
    ja: "無効な選択です。",
    zh: "无效的选择。",
    es: "Seleccion no valida.",
    fr: "Choix invalide.",
    de: "Ungueltige Auswahl.",
    it: "Scelta non valida.",
  },
  "setup.saved": {
    en: "selected. Settings saved.",
    ko: "선택됨. 설정이 저장됩니다.",
    ja: "を選択しました。設定を保存します。",
    zh: "已选择。设置已保存。",
    es: "seleccionado. Configuracion guardada.",
    fr: "selectionne. Parametres enregistres.",
    de: "ausgewaehlt. Einstellungen gespeichert.",
    it: "selezionato. Impostazioni salvate.",
  },
  "setup.defaultFallback": {
    en: "Proceeding with default settings (Ollama qwen3-coder:30b).",
    ko: "기본 설정(Ollama qwen3-coder:30b)으로 진행합니다.",
    ja: "デフォルト設定(Ollama qwen3-coder:30b)で続行します。",
    zh: "使用默认设置(Ollama qwen3-coder:30b)继续。",
    es: "Continuando con configuracion predeterminada.",
    fr: "Configuration par defaut utilisee.",
    de: "Standardeinstellungen werden verwendet.",
    it: "Proseguimento con impostazioni predefinite.",
  },

  // ── model switch ───────────────────────────────────────
  "switch.title": {
    en: "Switch Model",
    ko: "모델 변경",
    ja: "モデル変更",
    zh: "切换模型",
    es: "Cambiar modelo",
    fr: "Changer de modele",
    de: "Modell wechseln",
    it: "Cambia modello",
  },
  "switch.cancelled": {
    en: "Model switch cancelled.",
    ko: "모델 변경이 취소되었습니다.",
    ja: "モデル変更がキャンセルされました。",
    zh: "模型切换已取消。",
    es: "Cambio de modelo cancelado.",
    fr: "Changement de modele annule.",
    de: "Modellwechsel abgebrochen.",
    it: "Cambio modello annullato.",
  },
  "switch.changed": {
    en: "Changed to {0} ({1}).",
    ko: "{0} ({1})로 변경되었습니다.",
    ja: "{0} ({1})に変更しました。",
    zh: "已切换到 {0} ({1})。",
    es: "Cambiado a {0} ({1}).",
    fr: "Change en {0} ({1}).",
    de: "Gewechselt zu {0} ({1}).",
    it: "Cambiato in {0} ({1}).",
  },

  // ── status labels ──────────────────────────────────────
  "status.notInstalled": {
    en: "not installed",
    ko: "미설치",
    ja: "未インストール",
    zh: "未安装",
    es: "no instalado",
    fr: "non installe",
    de: "nicht installiert",
    it: "non installato",
  },
  "status.installed": {
    en: "installed",
    ko: "설치됨",
    ja: "インストール済み",
    zh: "已安装",
    es: "instalado",
    fr: "installe",
    de: "installiert",
    it: "installato",
  },
  "status.running": {
    en: "running",
    ko: "실행 중",
    ja: "実行中",
    zh: "运行中",
    es: "en ejecucion",
    fr: "en cours d'execution",
    de: "laeuft",
    it: "in esecuzione",
  },
  "status.noModels": {
    en: "no models",
    ko: "모델 없음",
    ja: "モデルなし",
    zh: "无模型",
    es: "sin modelos",
    fr: "aucun modele",
    de: "keine Modelle",
    it: "nessun modello",
  },
  "status.serverStopped": {
    en: "installed, server not running",
    ko: "설치됨, 서버 미실행",
    ja: "インストール済み、サーバー未起動",
    zh: "已安装，服务器未运行",
    es: "instalado, servidor detenido",
    fr: "installe, serveur arrete",
    de: "installiert, Server gestoppt",
    it: "installato, server fermo",
  },

  // ── install ────────────────────────────────────────────
  "install.askInstall": {
    en: "{0} is not installed. Install? (y/n): ",
    ko: "{0}가 설치되어 있지 않습니다. 설치할까요? (y/n): ",
    ja: "{0}がインストールされていません。インストールしますか？ (y/n): ",
    zh: "{0} 未安装。是否安装？(y/n): ",
    es: "{0} no esta instalado. Instalar? (y/n): ",
    fr: "{0} n'est pas installe. Installer? (y/n): ",
    de: "{0} ist nicht installiert. Installieren? (y/n): ",
    it: "{0} non e installato. Installare? (y/n): ",
  },
  "install.running": {
    en: "Running {0}...",
    ko: "{0} 실행 중...",
    ja: "{0} を実行中...",
    zh: "正在运行 {0}...",
    es: "Ejecutando {0}...",
    fr: "Execution de {0}...",
    de: "{0} wird ausgefuehrt...",
    it: "Esecuzione di {0}...",
  },
  "install.success": {
    en: "{0} installed!",
    ko: "{0} 설치 완료!",
    ja: "{0} インストール完了！",
    zh: "{0} 安装完成！",
    es: "{0} instalado!",
    fr: "{0} installe!",
    de: "{0} installiert!",
    it: "{0} installato!",
  },
  "install.failed": {
    en: "Installation failed: {0}",
    ko: "설치 실패: {0}",
    ja: "インストール失敗: {0}",
    zh: "安装失败: {0}",
    es: "Instalacion fallida: {0}",
    fr: "Echec de l'installation: {0}",
    de: "Installation fehlgeschlagen: {0}",
    it: "Installazione fallita: {0}",
  },
  "install.noHomebrew": {
    en: "Homebrew is not installed. Please install from https://ollama.com",
    ko: "Homebrew가 설치되어 있지 않습니다. https://ollama.com 에서 직접 설치해주세요.",
    ja: "Homebrewがインストールされていません。https://ollama.com からインストールしてください。",
    zh: "未安装Homebrew。请从 https://ollama.com 手动安装。",
    es: "Homebrew no esta instalado. Instale desde https://ollama.com",
    fr: "Homebrew n'est pas installe. Installez depuis https://ollama.com",
    de: "Homebrew nicht installiert. Bitte von https://ollama.com installieren.",
    it: "Homebrew non installato. Installa da https://ollama.com",
  },
  "install.noNpm": {
    en: "npm is not installed. Please install Node.js first.",
    ko: "npm이 설치되어 있지 않습니다. Node.js를 먼저 설치해주세요.",
    ja: "npmがインストールされていません。Node.jsを先にインストールしてください。",
    zh: "npm未安装。请先安装Node.js。",
    es: "npm no esta instalado. Instale Node.js primero.",
    fr: "npm n'est pas installe. Installez Node.js d'abord.",
    de: "npm nicht installiert. Bitte zuerst Node.js installieren.",
    it: "npm non installato. Installa prima Node.js.",
  },
  "install.failedProvider": {
    en: "{0} installation failed.",
    ko: "{0} 설치에 실패했습니다.",
    ja: "{0}のインストールに失敗しました。",
    zh: "{0} 安装失败。",
    es: "La instalacion de {0} ha fallado.",
    fr: "L'installation de {0} a echoue.",
    de: "Installation von {0} fehlgeschlagen.",
    it: "Installazione di {0} fallita.",
  },

  // ── ollama ─────────────────────────────────────────────
  "ollama.startServer": {
    en: "Start Ollama server? (y/n): ",
    ko: "Ollama 서버를 시작하시겠습니까? (y/n): ",
    ja: "Ollamaサーバーを起動しますか？ (y/n): ",
    zh: "是否启动Ollama服务器？(y/n): ",
    es: "Iniciar servidor Ollama? (y/n): ",
    fr: "Demarrer le serveur Ollama? (y/n): ",
    de: "Ollama-Server starten? (y/n): ",
    it: "Avviare il server Ollama? (y/n): ",
  },
  "ollama.starting": {
    en: "Starting ollama serve...",
    ko: "ollama serve 시작 중...",
    ja: "ollama serve を起動中...",
    zh: "正在启动 ollama serve...",
    es: "Iniciando ollama serve...",
    fr: "Demarrage de ollama serve...",
    de: "ollama serve wird gestartet...",
    it: "Avvio di ollama serve...",
  },
  "ollama.started": {
    en: "Ollama server started!",
    ko: "Ollama 서버가 시작되었습니다!",
    ja: "Ollamaサーバーが起動しました！",
    zh: "Ollama服务器已启动！",
    es: "Servidor Ollama iniciado!",
    fr: "Serveur Ollama demarre!",
    de: "Ollama-Server gestartet!",
    it: "Server Ollama avviato!",
  },
  "ollama.waitingStart": {
    en: "Waiting for server... Please run 'ollama serve' manually.",
    ko: "서버 시작을 기다리는 중... 수동으로 'ollama serve'를 실행해주세요.",
    ja: "サーバー起動待ち... 手動で 'ollama serve' を実行してください。",
    zh: "等待服务器启动... 请手动运行 'ollama serve'。",
    es: "Esperando servidor... Ejecute 'ollama serve' manualmente.",
    fr: "En attente du serveur... Lancez 'ollama serve' manuellement.",
    de: "Warte auf Server... Bitte 'ollama serve' manuell ausfuehren.",
    it: "In attesa del server... Esegui 'ollama serve' manualmente.",
  },
  "ollama.recommendedModels": {
    en: "Recommended models:",
    ko: "추천 모델:",
    ja: "おすすめモデル:",
    zh: "推荐模型:",
    es: "Modelos recomendados:",
    fr: "Modeles recommandes:",
    de: "Empfohlene Modelle:",
    it: "Modelli consigliati:",
  },
  "ollama.modelLight": {
    en: "Light & fast (8B)",
    ko: "가볍고 빠름 (8B)",
    ja: "軽量・高速 (8B)",
    zh: "轻量快速 (8B)",
    es: "Ligero y rapido (8B)",
    fr: "Leger et rapide (8B)",
    de: "Leicht und schnell (8B)",
    it: "Leggero e veloce (8B)",
  },
  "ollama.modelCoder": {
    en: "Coding specialist (30B, VRAM 20GB+)",
    ko: "코딩 특화 (30B, VRAM 20GB+)",
    ja: "コーディング特化 (30B, VRAM 20GB+)",
    zh: "编程专用 (30B, VRAM 20GB+)",
    es: "Especialista en codigo (30B, VRAM 20GB+)",
    fr: "Specialiste code (30B, VRAM 20GB+)",
    de: "Coding-Spezialist (30B, VRAM 20GB+)",
    it: "Specialista codice (30B, VRAM 20GB+)",
  },
  "ollama.modelGeneral": {
    en: "Meta general-purpose (8B)",
    ko: "Meta 범용 모델 (8B)",
    ja: "Meta汎用モデル (8B)",
    zh: "Meta通用模型 (8B)",
    es: "Meta proposito general (8B)",
    fr: "Meta usage general (8B)",
    de: "Meta Allzweck (8B)",
    it: "Meta uso generale (8B)",
  },
  "ollama.customInput": {
    en: "Enter manually",
    ko: "직접 입력",
    ja: "手動入力",
    zh: "手动输入",
    es: "Entrada manual",
    fr: "Saisie manuelle",
    de: "Manuell eingeben",
    it: "Inserimento manuale",
  },
  "ollama.selectModel": {
    en: "Select model (1-4): ",
    ko: "모델 선택 (1-4): ",
    ja: "モデル選択 (1-4): ",
    zh: "选择模型 (1-4): ",
    es: "Seleccionar modelo (1-4): ",
    fr: "Choisir modele (1-4): ",
    de: "Modell waehlen (1-4): ",
    it: "Seleziona modello (1-4): ",
  },
  "ollama.modelNameInput": {
    en: "Model name: ",
    ko: "모델 이름 입력: ",
    ja: "モデル名入力: ",
    zh: "输入模型名称: ",
    es: "Nombre del modelo: ",
    fr: "Nom du modele: ",
    de: "Modellname: ",
    it: "Nome modello: ",
  },
  "ollama.pulling": {
    en: "Running ollama pull {0}... (this may take a while)",
    ko: "ollama pull {0} 실행 중... (시간이 걸릴 수 있습니다)",
    ja: "ollama pull {0} 実行中... (時間がかかる場合があります)",
    zh: "正在运行 ollama pull {0}... (可能需要一些时间)",
    es: "Ejecutando ollama pull {0}... (puede tardar)",
    fr: "Execution de ollama pull {0}... (peut prendre du temps)",
    de: "ollama pull {0} wird ausgefuehrt... (kann dauern)",
    it: "Esecuzione di ollama pull {0}... (potrebbe richiedere tempo)",
  },
  "ollama.pullFailed": {
    en: "Model download failed: {0}",
    ko: "모델 다운로드 실패: {0}",
    ja: "モデルのダウンロード失敗: {0}",
    zh: "模型下载失败: {0}",
    es: "Descarga del modelo fallida: {0}",
    fr: "Echec du telechargement: {0}",
    de: "Modell-Download fehlgeschlagen: {0}",
    it: "Download del modello fallito: {0}",
  },
  "ollama.pullSuccess": {
    en: "{0} downloaded!",
    ko: "{0} 다운로드 완료!",
    ja: "{0} ダウンロード完了！",
    zh: "{0} 下载完成！",
    es: "{0} descargado!",
    fr: "{0} telecharge!",
    de: "{0} heruntergeladen!",
    it: "{0} scaricato!",
  },
  "ollama.newModelDownload": {
    en: "Download new model",
    ko: "새 모델 다운로드",
    ja: "新しいモデルをダウンロード",
    zh: "下载新模型",
    es: "Descargar nuevo modelo",
    fr: "Telecharger un nouveau modele",
    de: "Neues Modell herunterladen",
    it: "Scarica nuovo modello",
  },
  "ollama.serverNotRunning": {
    en: "Ollama (server not running)",
    ko: "Ollama (서버 미실행 — 시작 필요)",
    ja: "Ollama (サーバー未起動)",
    zh: "Ollama (服务器未运行)",
    es: "Ollama (servidor detenido)",
    fr: "Ollama (serveur arrete)",
    de: "Ollama (Server gestoppt)",
    it: "Ollama (server fermo)",
  },
  "ollama.installedModels": {
    en: "Installed models: {0}",
    ko: "설치된 모델: {0}",
    ja: "インストール済みモデル: {0}",
    zh: "已安装模型: {0}",
    es: "Modelos instalados: {0}",
    fr: "Modeles installes: {0}",
    de: "Installierte Modelle: {0}",
    it: "Modelli installati: {0}",
  },
  "ollama.selectInstalled": {
    en: "Model to use (default: {0}): ",
    ko: "사용할 모델 (기본: {0}): ",
    ja: "使用するモデル (デフォルト: {0}): ",
    zh: "使用的模型 (默认: {0}): ",
    es: "Modelo a usar (predeterminado: {0}): ",
    fr: "Modele a utiliser (defaut: {0}): ",
    de: "Zu verwendendes Modell (Standard: {0}): ",
    it: "Modello da usare (predefinito: {0}): ",
  },

  // ── gemini ─────────────────────────────────────────────
  "gemini.loginHint": {
    en: "Run 'gemini' to sign in with your Google account on first use.",
    ko: "첫 사용 시 'gemini'를 실행하여 Google 계정으로 로그인하세요.",
    ja: "初回使用時は 'gemini' を実行してGoogleアカウントでログインしてください。",
    zh: "首次使用时请运行 'gemini' 并使用Google账号登录。",
    es: "Ejecute 'gemini' para iniciar sesion con su cuenta de Google.",
    fr: "Lancez 'gemini' pour vous connecter avec votre compte Google.",
    de: "Fuehren Sie 'gemini' aus, um sich mit Ihrem Google-Konto anzumelden.",
    it: "Esegui 'gemini' per accedere con il tuo account Google.",
  },

  // ── claude ─────────────────────────────────────────────
  "claude.selectModel": {
    en: "Claude model (default: sonnet): ",
    ko: "Claude 모델 (기본: sonnet): ",
    ja: "Claudeモデル (デフォルト: sonnet): ",
    zh: "Claude模型 (默认: sonnet): ",
    es: "Modelo Claude (predeterminado: sonnet): ",
    fr: "Modele Claude (defaut: sonnet): ",
    de: "Claude-Modell (Standard: sonnet): ",
    it: "Modello Claude (predefinito: sonnet): ",
  },

  // ── common ─────────────────────────────────────────────
  "common.cancel": {
    en: "Cancel",
    ko: "취소",
    ja: "キャンセル",
    zh: "取消",
    es: "Cancelar",
    fr: "Annuler",
    de: "Abbrechen",
    it: "Annulla",
  },
  "common.free": {
    en: "free",
    ko: "무료",
    ja: "無料",
    zh: "免费",
    es: "gratis",
    fr: "gratuit",
    de: "kostenlos",
    it: "gratuito",
  },

  // ── CLI ────────────────────────────────────────────────
  "cli.title": {
    en: "Giver — Personal AI Assistant",
    ko: "Giver — 개인 AI 어시스턴트",
    ja: "Giver — パーソナルAIアシスタント",
    zh: "Giver — 个人AI助手",
    es: "Giver — Asistente IA Personal",
    fr: "Giver — Assistant IA Personnel",
    de: "Giver — Persoenlicher KI-Assistent",
    it: "Giver — Assistente IA Personale",
  },
  "cli.hint": {
    en: "Type your message, or / to see commands.",
    ko: "메시지를 입력하세요. /를 입력하면 명령어를 볼 수 있습니다.",
    ja: "メッセージを入力してください。/ でコマンド一覧を表示します。",
    zh: "输入消息，或输入 / 查看命令。",
    es: "Escriba su mensaje, o / para ver comandos.",
    fr: "Tapez votre message, ou / pour voir les commandes.",
    de: "Geben Sie Ihre Nachricht ein, oder / fuer Befehle.",
    it: "Digita il tuo messaggio, o / per i comandi.",
  },
  "cli.goodbye": {
    en: "Goodbye!",
    ko: "안녕히 가세요!",
    ja: "さようなら！",
    zh: "再见！",
    es: "Adios!",
    fr: "Au revoir!",
    de: "Auf Wiedersehen!",
    it: "Arrivederci!",
  },
  "cli.cleared": {
    en: "(conversation cleared)",
    ko: "(대화 초기화됨)",
    ja: "(会話がクリアされました)",
    zh: "(对话已清除)",
    es: "(conversacion borrada)",
    fr: "(conversation effacee)",
    de: "(Konversation geloescht)",
    it: "(conversazione cancellata)",
  },
  "cli.thinking": {
    en: "thinking...",
    ko: "생각 중...",
    ja: "考え中...",
    zh: "思考中...",
    es: "pensando...",
    fr: "reflexion...",
    de: "denkt nach...",
    it: "sto pensando...",
  },
  "cli.noModelSwitch": {
    en: "Model switch is not available.",
    ko: "모델 변경 기능이 설정되지 않았습니다.",
    ja: "モデル変更機能が設定されていません。",
    zh: "模型切换功能未设置。",
    es: "El cambio de modelo no esta disponible.",
    fr: "Le changement de modele n'est pas disponible.",
    de: "Modellwechsel nicht verfuegbar.",
    it: "Cambio modello non disponibile.",
  },

  // ── CLI command descriptions ───────────────────────────
  "cmd.model": {
    en: "Switch AI model",
    ko: "AI 모델 변경",
    ja: "AIモデル変更",
    zh: "切换AI模型",
    es: "Cambiar modelo IA",
    fr: "Changer de modele IA",
    de: "KI-Modell wechseln",
    it: "Cambia modello IA",
  },
  "cmd.clear": {
    en: "Clear conversation",
    ko: "대화 초기화",
    ja: "会話をクリア",
    zh: "清除对话",
    es: "Borrar conversacion",
    fr: "Effacer la conversation",
    de: "Konversation loeschen",
    it: "Cancella conversazione",
  },
  "cmd.quit": {
    en: "Quit",
    ko: "종료",
    ja: "終了",
    zh: "退出",
    es: "Salir",
    fr: "Quitter",
    de: "Beenden",
    it: "Esci",
  },

  // ── index.ts ───────────────────────────────────────────
  "index.customToolsLoaded": {
    en: "Loaded {0} custom tool(s)",
    ko: "커스텀 도구 {0}개 로드됨",
    ja: "カスタムツール {0}個をロードしました",
    zh: "已加载 {0} 个自定义工具",
    es: "{0} herramienta(s) personalizada(s) cargada(s)",
    fr: "{0} outil(s) personnalise(s) charge(s)",
    de: "{0} benutzerdefinierte(s) Tool(s) geladen",
    it: "{0} strumento/i personalizzato/i caricato/i",
  },
  "index.shuttingDown": {
    en: "Shutting down...",
    ko: "종료 중...",
    ja: "シャットダウン中...",
    zh: "正在关闭...",
    es: "Cerrando...",
    fr: "Arret en cours...",
    de: "Wird heruntergefahren...",
    it: "Chiusura in corso...",
  },

  // ── Docker / SearXNG ────────────────────────────────────
  "docker.searxngTitle": {
    en: "SearXNG Search Engine Setup",
    ko: "SearXNG 검색 엔진 설정",
    ja: "SearXNG検索エンジン設定",
    zh: "SearXNG搜索引擎设置",
    es: "Configuracion del motor de busqueda SearXNG",
    fr: "Configuration du moteur de recherche SearXNG",
    de: "SearXNG-Suchmaschinen-Einrichtung",
    it: "Configurazione motore di ricerca SearXNG",
  },
  "docker.notInstalled": {
    en: "Docker is not installed.",
    ko: "Docker가 설치되어 있지 않습니다.",
    ja: "Dockerがインストールされていません。",
    zh: "Docker未安装。",
    es: "Docker no esta instalado.",
    fr: "Docker n'est pas installe.",
    de: "Docker ist nicht installiert.",
    it: "Docker non e installato.",
  },
  "docker.detecting": {
    en: "Detecting operating system...",
    ko: "운영체제를 감지하고 있습니다...",
    ja: "OSを検出中...",
    zh: "正在检测操作系统...",
    es: "Detectando sistema operativo...",
    fr: "Detection du systeme d'exploitation...",
    de: "Betriebssystem wird erkannt...",
    it: "Rilevamento sistema operativo...",
  },
  "docker.askInstall": {
    en: "Install Docker? (y/n): ",
    ko: "Docker를 설치하시겠습니까? (y/n): ",
    ja: "Dockerをインストールしますか？ (y/n): ",
    zh: "安装Docker吗？(y/n): ",
    es: "Instalar Docker? (y/n): ",
    fr: "Installer Docker? (y/n): ",
    de: "Docker installieren? (y/n): ",
    it: "Installare Docker? (y/n): ",
  },
  "docker.openApp": {
    en: "Please open Docker Desktop and wait for it to start.",
    ko: "Docker Desktop을 실행하고 시작될 때까지 기다려주세요.",
    ja: "Docker Desktopを起動して開始するまでお待ちください。",
    zh: "请打开Docker Desktop并等待其启动。",
    es: "Abra Docker Desktop y espere a que se inicie.",
    fr: "Ouvrez Docker Desktop et attendez qu'il demarre.",
    de: "Bitte oeffnen Sie Docker Desktop und warten Sie.",
    it: "Apri Docker Desktop e attendi l'avvio.",
  },
  "docker.pressEnter": {
    en: "Press Enter when ready...",
    ko: "준비되면 Enter를 누르세요...",
    ja: "準備ができたらEnterを押してください...",
    zh: "准备好后按Enter...",
    es: "Presione Enter cuando este listo...",
    fr: "Appuyez sur Entree quand vous etes pret...",
    de: "Druecken Sie Enter, wenn bereit...",
    it: "Premi Invio quando sei pronto...",
  },
  "docker.downloadUrl": {
    en: "Please download and install from: {0}",
    ko: "{0} 에서 다운로드하여 설치해주세요.",
    ja: "{0} からダウンロードしてインストールしてください。",
    zh: "请从 {0} 下载安装。",
    es: "Descargue e instale desde: {0}",
    fr: "Telechargez et installez depuis: {0}",
    de: "Bitte herunterladen und installieren von: {0}",
    it: "Scarica e installa da: {0}",
  },
  "docker.windowsHint": {
    en: "After installation, restart the terminal.",
    ko: "설치 후 터미널을 재시작하세요.",
    ja: "インストール後、ターミナルを再起動してください。",
    zh: "安装后请重启终端。",
    es: "Despues de instalar, reinicie la terminal.",
    fr: "Apres l'installation, redemarrez le terminal.",
    de: "Nach der Installation das Terminal neu starten.",
    it: "Dopo l'installazione, riavvia il terminale.",
  },
  "docker.unknownDistro": {
    en: "Unknown Linux distribution ({0}). Please install Docker manually.",
    ko: "알 수 없는 Linux 배포판 ({0}). Docker를 수동으로 설치해주세요.",
    ja: "不明なLinuxディストリビューション ({0})。Dockerを手動でインストールしてください。",
    zh: "未知Linux发行版 ({0})。请手动安装Docker。",
    es: "Distribucion Linux desconocida ({0}). Instale Docker manualmente.",
    fr: "Distribution Linux inconnue ({0}). Installez Docker manuellement.",
    de: "Unbekannte Linux-Distribution ({0}). Bitte Docker manuell installieren.",
    it: "Distribuzione Linux sconosciuta ({0}). Installa Docker manualmente.",
  },
  "docker.linuxCmd": {
    en: "The following command will be run:",
    ko: "다음 명령이 실행됩니다:",
    ja: "以下のコマンドが実行されます:",
    zh: "将运行以下命令:",
    es: "Se ejecutara el siguiente comando:",
    fr: "La commande suivante sera executee:",
    de: "Der folgende Befehl wird ausgefuehrt:",
    it: "Verra eseguito il seguente comando:",
  },
  "docker.sudoHint": {
    en: "sudo password may be required.",
    ko: "sudo 비밀번호가 필요할 수 있습니다.",
    ja: "sudoパスワードが必要な場合があります。",
    zh: "可能需要sudo密码。",
    es: "Puede requerirse la contrasena de sudo.",
    fr: "Le mot de passe sudo peut etre requis.",
    de: "sudo-Passwort wird moeglicherweise benoetigt.",
    it: "Potrebbe essere richiesta la password sudo.",
  },
  "docker.skipSearxng": {
    en: "Skipping SearXNG setup. Web search will be unavailable.",
    ko: "SearXNG 설정을 건너뜁니다. 웹 검색을 사용할 수 없습니다.",
    ja: "SearXNGのセットアップをスキップします。Web検索は利用できません。",
    zh: "跳过SearXNG设置。网络搜索将不可用。",
    es: "Omitiendo configuracion de SearXNG. La busqueda web no estara disponible.",
    fr: "Configuration de SearXNG ignoree. La recherche Web sera indisponible.",
    de: "SearXNG-Einrichtung uebersprungen. Websuche nicht verfuegbar.",
    it: "Configurazione SearXNG saltata. La ricerca web non sara disponibile.",
  },
  "docker.notRunning": {
    en: "Docker is installed but the daemon is not running.",
    ko: "Docker가 설치되어 있지만 데몬이 실행되지 않고 있습니다.",
    ja: "Dockerはインストール済みですが、デーモンが起動していません。",
    zh: "Docker已安装但守护进程未运行。",
    es: "Docker esta instalado pero el demonio no esta en ejecucion.",
    fr: "Docker est installe mais le demon n'est pas en cours d'execution.",
    de: "Docker ist installiert, aber der Daemon laeuft nicht.",
    it: "Docker e installato ma il daemon non e in esecuzione.",
  },
  "docker.startingDaemon": {
    en: "Starting Docker daemon...",
    ko: "Docker 데몬을 시작합니다...",
    ja: "Dockerデーモンを起動中...",
    zh: "正在启动Docker守护进程...",
    es: "Iniciando demonio Docker...",
    fr: "Demarrage du demon Docker...",
    de: "Docker-Daemon wird gestartet...",
    it: "Avvio daemon Docker...",
  },
  "docker.daemonFailed": {
    en: "Docker daemon failed to start. Please start Docker manually.",
    ko: "Docker 데몬 시작에 실패했습니다. Docker를 수동으로 시작해주세요.",
    ja: "Dockerデーモンの起動に失敗しました。手動で起動してください。",
    zh: "Docker守护进程启动失败。请手动启动Docker。",
    es: "El demonio Docker no pudo iniciarse. Inicie Docker manualmente.",
    fr: "Le demon Docker n'a pas pu demarrer. Demarrez Docker manuellement.",
    de: "Docker-Daemon konnte nicht gestartet werden. Bitte manuell starten.",
    it: "Avvio daemon Docker fallito. Avvia Docker manualmente.",
  },
  "docker.dockerReady": {
    en: "Docker is ready.",
    ko: "Docker가 준비되었습니다.",
    ja: "Dockerの準備ができました。",
    zh: "Docker已就绪。",
    es: "Docker esta listo.",
    fr: "Docker est pret.",
    de: "Docker ist bereit.",
    it: "Docker e pronto.",
  },
  "docker.searxngAlready": {
    en: "SearXNG is already running.",
    ko: "SearXNG가 이미 실행 중입니다.",
    ja: "SearXNGは既に起動しています。",
    zh: "SearXNG已经在运行。",
    es: "SearXNG ya esta en ejecucion.",
    fr: "SearXNG est deja en cours d'execution.",
    de: "SearXNG laeuft bereits.",
    it: "SearXNG e gia in esecuzione.",
  },
  "docker.startingSearxng": {
    en: "Starting SearXNG... (first run may take a minute)",
    ko: "SearXNG를 시작합니다... (첫 실행 시 시간이 걸릴 수 있습니다)",
    ja: "SearXNGを起動中... (初回は時間がかかる場合があります)",
    zh: "正在启动SearXNG... (首次运行可能需要一分钟)",
    es: "Iniciando SearXNG... (la primera vez puede tardar un minuto)",
    fr: "Demarrage de SearXNG... (le premier lancement peut prendre une minute)",
    de: "SearXNG wird gestartet... (erster Start kann eine Minute dauern)",
    it: "Avvio di SearXNG... (il primo avvio potrebbe richiedere un minuto)",
  },
  "docker.searxngStarted": {
    en: "SearXNG started! (http://localhost:8080)",
    ko: "SearXNG가 시작되었습니다! (http://localhost:8080)",
    ja: "SearXNGが起動しました！ (http://localhost:8080)",
    zh: "SearXNG已启动！(http://localhost:8080)",
    es: "SearXNG iniciado! (http://localhost:8080)",
    fr: "SearXNG demarre! (http://localhost:8080)",
    de: "SearXNG gestartet! (http://localhost:8080)",
    it: "SearXNG avviato! (http://localhost:8080)",
  },
  "docker.searxngFailed": {
    en: "SearXNG failed to start. Web search will be unavailable.",
    ko: "SearXNG 시작에 실패했습니다. 웹 검색을 사용할 수 없습니다.",
    ja: "SearXNGの起動に失敗しました。Web検索は利用できません。",
    zh: "SearXNG启动失败。网络搜索将不可用。",
    es: "SearXNG no pudo iniciarse. La busqueda web no estara disponible.",
    fr: "SearXNG n'a pas pu demarrer. La recherche Web sera indisponible.",
    de: "SearXNG konnte nicht gestartet werden. Websuche nicht verfuegbar.",
    it: "Avvio SearXNG fallito. La ricerca web non sara disponibile.",
  },
};

// ── public API ───────────────────────────────────────────

/**
 * Translate a key with optional positional arguments.
 * Usage: t("install.askInstall", "Claude CLI")
 *   → "Claude CLI가 설치되어 있지 않습니다. 설치할까요? (y/n): "
 */
export function t(key: string, ...args: string[]): string {
  const entry = messages[key];
  if (!entry) return key;

  let text = entry[current] ?? entry.en ?? key;
  for (let i = 0; i < args.length; i++) {
    text = text.replaceAll(`{${i}}`, args[i]);
  }
  return text;
}
